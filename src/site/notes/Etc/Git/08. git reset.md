---
{"tags":["Git"],"dg-hide":true,"dg-publish":true,"permalink":"/etc/git/08-git-reset/","hide":true,"dgPassFrontmatter":true,"noteIcon":""}
---

ë¡œì»¬ ë ˆí¬ì§€í† ë¦¬ë¥¼ ì›ê²© ë ˆí¬ì§€í† ë¦¬ì™€ ì—°ê²°í•˜ëŠ” ê³¼ì •ì—ì„œ ìž˜ ë˜ì§€ ì•Šì•„ `git reset`ì„ ë‚¨ë°œí–ˆë”ë‹ˆ íŒŒì¼ì´ ëª¨ë‘ ë‚ ë¼ê°„ ê²½í—˜ì„ í–ˆë‹¤. ë‹¤í–‰ížˆ ë‹¤ì‹œ ë³µêµ¬ëŠ” í–ˆì§€ë§Œ

ì´ ê¸°íšŒì— `git reset`ëª…ë ¹ì–´ì— ëŒ€í•´ ìž˜ ì•Œì•„ë³´ê³ , ì™œ íŒŒì¼ì´ ì—†ì–´ì§€ê²Œ ëëŠ”ì§€ ì•Œì•„ë³´ìž.

# HEAD, Index, Working Direcotry
Resetì— ëŒ€í•´ ì•Œê¸° ì „ HEAD, Index, Working Direcotryì— ëŒ€í•´ ë‹¤ì‹œ ì§šê³  ë„˜ì–´ê°€ë©´ ì¢‹ê² ë‹¤.

## HEAD
HEADëŠ” í˜„ìž¬ [[Etc/Git/04. branch, merge#branchëž€?\|ë¸Œëžœì¹˜]]ë¥¼ ê°€ë¦¬í‚¤ëŠ” í¬ì¸í„°ì´ë©°, ë¸Œëžœì¹˜ëŠ” ë¸Œëžœì¹˜ì— ë‹´ê¸´ ì»¤ë°‹ ì¤‘ ê°€ìž¥ ë§ˆì§€ë§‰ ì»¤ë°‹ì„ ê°€ë¦¬í‚¨ë‹¤.
ë‹¨ìˆœí•˜ê²Œ ìƒê°í•˜ë©´ HEADëŠ” *í˜„ìž¬ ë¸Œëžœì¹˜ ë§ˆì§€ë§‰ ì»¤ë°‹ì˜ ìŠ¤ëƒ…ìƒ·*ì´ë‹¤.

## Index
IndexëŠ”Â **ë°”ë¡œ ë‹¤ìŒì— ì»¤ë°‹í• **Â ê²ƒë“¤ì´ë‹¤. ì´ë¯¸ ì•žì—ì„œ ìš°ë¦¬ëŠ” ì´ëŸ° ê°œë…ì„ [[Etc/Git/01. Git ê¸°ì´ˆ#Work Tree / Index\|Staging Area]] ë¼ê³  í•œë‹¤. Staging Area ëŠ” ì‚¬ìš©ìžê°€Â `git commit`Â ëª…ë ¹ì„ ì‹¤í–‰í–ˆì„ ë•Œ Gitì´ ì²˜ë¦¬í•  ê²ƒë“¤ì´ ìžˆëŠ” ê³³ì´ë‹¤.

IndexëŠ” Working Directoryì—ì„œ ë§ˆì§€ë§‰ìœ¼ë¡œ Checkout í•œ ë¸Œëžœì¹˜ì˜ íŒŒì¼ ëª©ë¡ê³¼ íŒŒì¼ ë‚´ìš©ìœ¼ë¡œ ì±„ì›Œì§„ë‹¤.
ì´í›„ íŒŒì¼ ë³€ê²½ìž‘ì—…ì„ í•˜ê³  ë³€ê²½í•œ ë‚´ìš©ìœ¼ë¡œ Indexë¥¼ ì—…ë°ì´íŠ¸ í•  ìˆ˜ ìžˆë‹¤. ì´ë ‡ê²Œ ì—…ë°ì´íŠ¸ í•˜ê³ Â `git commit`Â ëª…ë ¹ì„ ì‹¤í–‰í•˜ë©´ IndexëŠ” ìƒˆ ì»¤ë°‹ìœ¼ë¡œ ë³€í™˜ëœë‹¤.
## Working Direcotry
ìœ„ì˜ ë‘ ê´€ë¦¬ íŠ¸ë¦¬ëŠ” ë‚´ìš©ì„ íš¨ìœ¨ì ì¸ í˜•íƒœë¡œ `.git` ë””ë ‰í† ë¦¬ì— ì €ìž¥í•œë‹¤. í•˜ì§€ë§Œ ê·¸ ë‚´ìš©ì€ ì‚¬ëžŒì´ ì•Œì•„ë³´ê¸°ì— íž˜ë“¤ê¸°ì— ì›Œí‚¹ ë””ë ‰í† ë¦¬ëŠ” ì‹¤ì œ íŒŒì¼ë¡œ ì¡´ìž¬í•œë‹¤.
ë°”ë¡œ ëˆˆì— ë³´ì´ê¸° ë•Œë¬¸ì— íŽ¸ì§‘í•˜ê¸° ì‰½ê³ , ì»¤ë°‹í•˜ê¸° ì „ì—ëŠ” Index(Staging Area)ì— ì˜¬ë ¤ë†“ê³  ì–¼ë§ˆë“ ì§€ ë³€ê²½ì´ ê°€ëŠ¥í•˜ë‹¤.


# Work Flow
## step 1
ì‹¤ìŠµì„ ìœ„í•´ git-reset-testë¼ëŠ” í´ë”ë¥¼ ìƒì„±í•˜ê³  ê·¸ í´ë”ë¥¼ `git init` í–ˆë‹¤.
![Pasted image 20231019194904.png|400](/img/user/Etc/Git/Pasted%20image%2020231019194904.png)

í˜„ìž¬ ì•„ë¬´ëŸ° ì»¤ë°‹ë„ í•˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— í˜„ìž¬ HEADëŠ” ì•„ë¬´ê²ƒë„ ê°€ë¦¬í‚¤ì§€ ì•ŠëŠ”ë‹¤.
![Pasted image 20231019195105.png](/img/user/Etc/Git/Pasted%20image%2020231019195105.png)

ì´ì œ `test.txt` íŒŒì¼ì„ í•˜ë‚˜ ë§Œë“¤ê³ , `git add`ì™€ `git commit`ê¹Œì§€ í•´ë³´ìž.
![Pasted image 20231019195251.png|400](/img/user/Etc/Git/Pasted%20image%2020231019195251.png)

![Pasted image 20231019195832.png](/img/user/Etc/Git/Pasted%20image%2020231019195832.png)

## step 2
ì´ì œ `test.txt` íŒŒì¼ì„ ìˆ˜ì •í•œ í›„ ë‹¤ì‹œ ìœ„ì˜ ê³¼ì •ì„ ë°˜ë³µí•´ë³´ìž.
![Pasted image 20231019205011.png](/img/user/Etc/Git/Pasted%20image%2020231019205011.png)

ì´ ê³¼ì •ì„ í•œ ë²ˆë§Œ ë” í•´ë³´ìž.
![Pasted image 20231019210725.png](/img/user/Etc/Git/Pasted%20image%2020231019210725.png)

![Pasted image 20231019211000.png|400](/img/user/Etc/Git/Pasted%20image%2020231019211000.png)
í˜„ìž¬ê¹Œì§€ `git log`
## HEAD ì´ë™
`reset`Â ëª…ë ¹ì´ í•˜ëŠ” ì²« ë²ˆì§¸ ì¼ì€ HEAD ë¸Œëžœì¹˜ë¥¼ ì´ë™ì‹œí‚¨ë‹¤.Â `checkout`Â ëª…ë ¹ì²˜ëŸ¼ HEADê°€ ê°€ë¦¬í‚¤ëŠ” ë¸Œëžœì¹˜ë¥¼ ë°”ê¾¸ì§€ëŠ” ì•ŠëŠ”ë‹¤. HEADëŠ” ê³„ì† í˜„ìž¬ ë¸Œëžœì¹˜ë¥¼ ê°€ë¦¬í‚¤ê³  ìžˆê³ , í˜„ìž¬ ë¸Œëžœì¹˜ê°€ ê°€ë¦¬í‚¤ëŠ” ì»¤ë°‹ì„ ë°”ê¾¼ë‹¤. Â 

### soft
![Pasted image 20231019211238.png](/img/user/Etc/Git/Pasted%20image%2020231019211238.png)
```bash
git reset --soft HEAD~
```
`git reset --soft`ëª…ë ¹ì–´ëŠ” ë”± ìœ„ì˜ ë‹¤ì´ì–´ê·¸ëž¨ê¹Œì§€ë§Œ ë˜ëŒë¦°ë‹¤. ê°€ìž¥ ìµœê·¼ì˜ `commit` ëª…ë ¹ì–´ë¥¼ ë˜ëŒë¦°ë‹¤.

### mixed
`git reset --[option] HEAD~` ëª…ë ¹ì–´ì—ì„œ optionì„ ì£¼ì§€ ì•Šìœ¼ë©´ ê¸°ë³¸ ê°’ìœ¼ë¡œ `mixed`ê°€ ë“¤ì–´ê°„ë‹¤.
`mixed`ëª…ë ¹ì–´ëŠ” Indexê¹Œì§€ ì´ì „ HEADê°€ ê°€ë¦¬í‚¤ëŠ” ìŠ¤ëƒ…ìƒ·ìœ¼ë¡œ ì´ë™í•œë‹¤.
![Pasted image 20231019212215.png](/img/user/Etc/Git/Pasted%20image%2020231019212215.png)
```bash
git reset --mixed HEAD~
```

### hard
`hard` ì˜µì…˜ì„ ì‚¬ìš©í•˜ë©´ Working Directoryê¹Œì§€ ë³€ê²½ì„ í•œë‹¤. ì¦‰, íŒŒì¼ê¹Œì§€ ì „ë¶€ ì´ì „ HEADë¡œ ëŒë¦°ë‹¤.
![Pasted image 20231019212729.png](/img/user/Etc/Git/Pasted%20image%2020231019212729.png)

> **âš ï¸ ê²½ê³ **
> `hard`ì˜µì…˜ì€ `git reset` ëª…ë ¹ì–´ë¥¼ ìœ„í—˜í•˜ê²Œ ë§Œë“œëŠ” ì•„ì£¼ ì¡°ì‹¬í•´ì•¼ í•˜ëŠ” ë…€ì„ì´ë‹¤.
> Gitì—ëŠ” ì‹¤ì œ ë°ì´í„°ê¹Œì§€ ì‚­ì œí•˜ê²Œ í•˜ëŠ” ë°©ë²•ì´ ë³„ë¡œ ì—†ëŠ”ë° ì´ ë…€ì„ì´ ê·¸ì¤‘ í•˜ë‚˜ì´ë‹¤. (ê·¸ëž˜ì„œ ì‹¤ìˆ˜ë¡œ í”„ë¡œì íŠ¸ í´ë”ê°€ ë‚ ë¼ê°€ì„œ ì‹ê²í•œì ì´ ìžˆë‹¤..)
> `reset` ëª…ë ¹ì–´ëŠ” ì–´ë–»ê²Œ ì‚¬ìš©í•˜ë”ë¼ë„ ê·¸ ê²°ê³¼ë¥¼ ê°„ë‹¨í•˜ê²Œ ë‹¤ì‹œ ë˜ëŒë¦´ ìˆ˜ ìžˆì§€ë§Œ. `hard` ì˜µì…˜ì„ ì£¼ë©´ ë˜ëŒë¦´ ìˆ˜ ì—†ë‹¤.
> ì´ ì˜ˆì œëŠ” version 3ë¥¼ ì»¤ë°‹ìœ¼ë¡œ ë³´ê´€í•˜ê³  ìžˆê¸° ë•Œë¬¸ì— `reflog` ëª…ë ¹ì–´ë¥¼ ì´ìš©í•˜ìš” ë³µêµ¬í•  ìˆ˜ ìžˆì§€ë§Œ, ì»¤ë°‹í•œì ì´ ì—†ë‹¤ë©´ ë³µêµ¬í•  ë°©ë²•ì´ ì—†ë‹¤.

>ðŸ—’ï¸ reset ì „ì˜ commitì€ â€˜ORIG_HEADâ€™ ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ì°¸ì¡°í•  ìˆ˜ ìžˆë‹¤.
> ì‹¤ìˆ˜ë¡œ resetì„ í•œ ê²½ìš° `$ git reset --hard ORIG_HEAD` ëª…ë ¹ì–´ë¥¼ í†µí•´ reset ì‹¤í–‰ ì „ì˜ ìƒíƒœë¡œ ë˜ëŒë¦´ ìˆ˜ ìžˆë‹¤.


# ìš”ì•½
`git reset` ëª…ë ¹ì–´ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ìˆœì„œë¥¼ í†µí•´ ì§„í–‰ëœë‹¤.
1. ë¸Œëžœì¹˜ì˜ HEAD ìœ„ì¹˜ë¥¼ ì˜®ê¸´ë‹¤. (`--soft` ì˜µì…˜ ì ìš©ì‹œ ì—¬ê¸°ê¹Œì§€)
2. Index(Staging Area)ë¥¼ ì§€ì •í•œ HEADê°€ ê°€ë¦¬í‚¤ëŠ” ìƒíƒœë¡œ ë§Œë“ ë‹¤. (`--mixed`ì˜µì…˜ ì ìš©ì‹œ ì—¬ê¸°ê¹Œì§€, ê¸°ë³¸ ê°’)
3. ì›Œí‚¹ ë””ë ‰í† ë¦¬ë¥¼ Indexì˜ ìƒíƒœë¡œ ë®ì–´ì“´ë‹¤.

|ëª¨ë“œëª…|HEAD ìœ„ì¹˜|Index|Work Tree|
|---|---|---|---|
|soft|ë³€ê²½ O|ë³€ê²½ X|ë³€ê²½ X|
|mixed|ë³€ê²½ O|ë³€ê²½ O|ë³€ê²½ X|
|hard|ë³€ê²½ O|ë³€ê²½ O|ë³€ê²½ O|


---
> **ì°¸ì¡°**
> - [Git - Reset ëª…í™•ížˆ ì•Œê³  ê°€ê¸°](https://git-scm.com/book/ko/v2/Git-%EB%8F%84%EA%B5%AC-Reset-%EB%AA%85%ED%99%95%ED%9E%88-%EC%95%8C%EA%B3%A0-%EA%B0%80%EA%B8%B0)
